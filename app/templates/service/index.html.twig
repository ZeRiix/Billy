{% extends 'connected.html.twig' %}

{% block title %}Liste des services{% endblock %}

{% block body %}
	<div class="mb-14 flex justify-between items-center">
		<div>
			<h1 class="text-2xl font-semibold pb-4">Mes Services</h1>
			<twig:Toggle title="Archivé" :isChecked="isArchived"></twig:Toggle>
		</div>
		<twig:Button value="Ajouter un service" :href="path('app_create_service', { organization: getCurrentOrganization().id })"></twig:Button>
	</div>
	<twig:Table
		:data="services"
		:cols="{
			name: 'Nom du Service',
			description: 'Description',
		}"
		:action="true"
	>
		<a href="{{ path('app_update_service', { organization: getCurrentOrganization().id, service: row.id }) }}">
			<span class="mdi mdi-pencil text-xl text-gray-500"></span>
		</a>
		{% if  row.isArchived == false %}
		<a href="{{ path('app_archive_service', { organization: getCurrentOrganization().id, service: row.id }) }}">
			<span class="mdi mdi-eye-outline text-xl text-gray-500"></span>
		</a>
		{% else %}
		<a href="{{ path('app_archive_service', { organization: getCurrentOrganization().id, service: row.id }) }}">
			<span class="mdi mdi-eye-remove-outline text-xl text-gray-500"></span>
		</a>
		{% endif %}
	</twig:Table>
	<script>
		document.addEventListener("DOMContentLoaded", function() {
			const checkbox = document.getElementById("toggle-button-element");
			checkbox.addEventListener("change", function() {
				console.log("Changement détecté");
				if (this.checked) {
					window.location.href = "/organization/{{ getCurrentOrganization().id }}/services?archived=true";
				} else {
					window.location.href = "/organization/{{ getCurrentOrganization().id }}/services";
				}
			});
		});
	</script>
{% endblock %}
