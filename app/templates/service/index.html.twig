{% extends 'connected.html.twig' %}

{% block title %}Liste des services{% endblock %}

{% block body %}
	<div class="mb-14 flex justify-between items-center">
		<form id="archivedForm" action="" method="GET">
			<h1 class="text-2xl font-semibold pb-4">Mes Services</h1>
			<twig:Toggle 
			title="ArchivÃ©" 
			:isChecked="isArchived"
			name="archived"
			onClick="
				setTimeout(() => {
					document.getElementById('archivedForm').requestSubmit()
				})
			">
			</twig:Toggle>
		</form>
		<twig:Button value="Ajouter" :href="path('app_create_service', { organization: getCurrentOrganization().id })"></twig:Button>
	</div>
	<twig:Table
		:data="services"
		:cols="{
			name: 'Nom du Service',
			description: 'Description',
		}"
		:action="true"
	>
		<a href="{{ path('app_update_service', { organization: getCurrentOrganization().id, service: row.id }) }}">
			<span class="mdi mdi-pencil text-xl text-bgrey"></span>
		</a>
		{% if  row.isArchived == false %}
			<a href="{{ path('app_archive_service', { organization: getCurrentOrganization().id, service: row.id }) }}">
				<span class="mdi mdi-archive-arrow-down-outline text-xl text-bgrey"></span>
			</a>
		{% else %}
			<span class="absolute left-1 top-1/2 -translate-y-1/2 mdi mdi-crown text-base text-amber-500"></span>

			<a href="{{ path('app_archive_service', { organization: getCurrentOrganization().id, service: row.id }) }}">
				<span class="mdi mdi-archive-arrow-up-outline text-xl text-bgrey"></span>
			</a>
		{% endif %}
	</twig:Table>
{% endblock %}
